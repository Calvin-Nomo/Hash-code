<script>

    async function setLanguage(lang) {
    try {
        const response = await fetch(`http://127.0.0.1:8000/translations/${lang}`);
        if (!response.ok) throw new Error("Failed to fetch translations");

        const translations = await response.json();

        document.querySelectorAll("[data-i18n]").forEach(el => {
            const key = el.getAttribute("data-i18n");
            if (translations[key]) el.textContent = translations[key];
        });

        localStorage.setItem("lang", lang);
    } catch (err) {
        console.error(err);
    }
}

// Initialize on page load
document.addEventListener("DOMContentLoaded", () => {
    const lang = localStorage.getItem("lang") || "en";
    setLanguage(lang);
});

// Language switcher
document.getElementById("languageSwitcher").addEventListener("change", (e) => {
    setLanguage(e.target.value);
});

</script>